import{c as i,e as v,i as N,r as o,h as g,R as f,j as e,k as b,l as P,b as k,a as C}from"./index-B8k-7hAU.js";/* empty css                 */import{L as F}from"./loader-circle-CwrYz97C.js";const S=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],E=i("credit-card",S);const z=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$=i("dollar-sign",z);const w=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A=i("shield-check",w),I=()=>{const{cartTotal:d,cartItems:l}=v(),{user:a}=N(),[m,x]=o.useState(""),[u,t]=o.useState(""),[n,h]=o.useState(!1),y=g();f.useEffect(()=>{document.title="Secure Payment | FoodKart"},[]);const p=d*.05,r=d+p,j=async s=>{if(s.preventDefault(),t(""),a&&parseFloat(m)===parseFloat(r.toFixed(2))){h(!0);try{const c={userId:a.uid,userName:a.name,userEmail:a.email,items:l,totalAmount:r,status:"Confirmed",createdAt:b()};await P(k(C,"orders"),c),y("/order-success")}catch(c){console.error("Error saving order:",c),t("Failed to process order. Please try again.")}finally{h(!1)}}else t(`Incorrect amount. Please enter exactly $${r.toFixed(2)}`)};return e.jsx("div",{className:"checkout-page animate-in",children:e.jsx("div",{className:"container payment-container",children:e.jsxs("div",{className:"payment-card",children:[e.jsxs("div",{className:"payment-header",children:[e.jsx(E,{size:32,color:"var(--primary)"}),e.jsx("h1",{children:"Complete Your Payment"}),e.jsx("p",{children:"Enter the exact amount to confirm your order"})]}),e.jsxs("div",{className:"order-summary",children:[e.jsx("h3",{children:"Order Summary"}),l.map(s=>e.jsxs("div",{className:"summary-row",children:[e.jsxs("span",{children:[s.name," x ",s.quantity]}),e.jsxs("span",{children:["$",(s.price*s.quantity).toFixed(2)]})]},s.id)),e.jsxs("div",{className:"summary-total",children:[e.jsx("span",{children:"Total Amount to Pay"}),e.jsxs("span",{children:["$",r.toFixed(2)]})]})]}),u&&e.jsx("div",{className:"payment-error",children:u}),e.jsxs("form",{onSubmit:j,className:"payment-form",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Enter Amount ($)"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx($,{size:20}),e.jsx("input",{type:"number",step:"0.01",required:!0,placeholder:"0.00",value:m,onChange:s=>x(s.target.value),disabled:n})]})]}),e.jsx("button",{type:"submit",className:"pay-btn",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"spinner",size:18})," Processing..."]}):"Pay Now"})]}),e.jsxs("div",{className:"secure-tag",children:[e.jsx(A,{size:16})," 100% Secure Payment Powered by FoodKart"]})]})})})};export{I as default};
