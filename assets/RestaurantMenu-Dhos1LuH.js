import{c as b,u as k,e as C,r as i,j as s,L as x,f as S,d as z,a as u,g as M,b as D}from"./index-B8k-7hAU.js";import{S as E,C as R,T as q}from"./tag-Di4azVEQ.js";import{M as I,P as j,S as p}from"./shopping-bag-CW2dmXco.js";const L=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w=b("chevron-left",L),$=()=>{const{id:c}=k(),{addToCart:N,updateQuantity:r,cartItems:t}=C(),[a,f]=i.useState(null),[d,v]=i.useState([]),[g,l]=i.useState(!0);i.useEffect(()=>{a&&(document.title=`${a.name} | FoodKart Menu`)},[a]),i.useEffect(()=>{(async()=>{if(c){l(!0);try{const n=await S(z(u,"restaurants",c));n.exists()&&f({id:n.id,...n.data()});const y=(await M(D(u,"restaurants",c,"menu"))).docs.map(h=>({id:h.id,...h.data()}));v(y)}catch(n){console.error("Error fetching menu:",n)}l(!1)}})()},[c]);const o=e=>{const n=t.find(m=>m.id===e);return n?n.quantity:0};return g?s.jsx("div",{className:"loading-screen",children:"Preparing the table..."}):a?s.jsxs("div",{className:"menu-page animate-in",children:[s.jsx("div",{className:"menu-header",children:s.jsxs("div",{className:"container",children:[s.jsxs(x,{to:"/",className:"back-link",children:[s.jsx(w,{size:20})," Back to Restaurants"]}),s.jsx("div",{className:"header-content",children:s.jsxs("div",{className:"header-info",children:[s.jsx("h1",{children:a.name}),s.jsxs("div",{className:"meta",children:[s.jsxs("span",{className:"rating",children:[s.jsx(E,{size:16,fill:"currentColor"})," ",a.rating]}),s.jsx("span",{className:"dot",children:"•"}),s.jsx("span",{children:a.cuisine}),s.jsx("span",{className:"dot",children:"•"}),s.jsxs("span",{className:"time",children:[s.jsx(R,{size:16})," ",a.deliveryTime]})]}),s.jsx("p",{className:"description",children:a.description}),a.offer&&s.jsxs("div",{className:"header-offer",children:[s.jsx(q,{size:16})," ",a.offer]})]})})]})}),s.jsxs("div",{className:"container menu-content",children:[s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"menu-list-header",children:[s.jsx("h2",{children:"Recommended Items"}),s.jsxs("p",{children:[d.length," items available"]})]}),s.jsx("div",{className:"items-grid",children:d.map(e=>s.jsxs("div",{className:"menu-item",children:[s.jsxs("div",{className:"item-detail",children:[s.jsxs("div",{className:"item-text",children:[s.jsx("h3",{children:e.name}),s.jsxs("p",{className:"price",children:["$",e.price.toFixed(2)]}),s.jsx("p",{className:"item-desc",children:e.description})]}),s.jsx("div",{className:"item-controls",children:o(e.id)>0?s.jsxs("div",{className:"quantity-toggle",children:[s.jsx("button",{onClick:()=>r(e.id,-1),children:s.jsx(I,{size:16})}),s.jsx("span",{children:o(e.id)}),s.jsx("button",{onClick:()=>r(e.id,1),children:s.jsx(j,{size:16})})]}):s.jsxs("button",{onClick:()=>N(e),className:"add-btn",children:[s.jsx(j,{size:16})," ADD"]})})]}),s.jsx("div",{className:"item-image",children:s.jsx("img",{src:e.image,alt:e.name})})]},e.id))})]}),s.jsx("div",{className:"menu-sidebar",children:t.length>0?s.jsxs("div",{className:"cart-summary-card",children:[s.jsx("h3",{children:"My Cart"}),s.jsx("div",{className:"summary-items",children:t.map(e=>s.jsxs("div",{className:"summary-item",children:[s.jsxs("div",{className:"sum-item-name",children:[e.name," x ",e.quantity]}),s.jsxs("span",{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id))}),s.jsxs("div",{className:"summary-total",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["$",t.reduce((e,n)=>e+n.price*n.quantity,0).toFixed(2)]})]}),s.jsxs(x,{to:"/cart",className:"checkout-btn",children:["Checkout ",s.jsx(p,{size:20})]})]}):s.jsxs("div",{className:"cart-summary-card empty",children:[s.jsx("div",{className:"empty-cart-icon",children:s.jsx(p,{size:48})}),s.jsx("p",{children:"Empty Cart"}),s.jsx("small",{children:"Good food is always cooking! Go ahead, order some."})]})})]})]}):s.jsx("div",{className:"loading",children:"Restaurant not found."})};export{$ as default};
